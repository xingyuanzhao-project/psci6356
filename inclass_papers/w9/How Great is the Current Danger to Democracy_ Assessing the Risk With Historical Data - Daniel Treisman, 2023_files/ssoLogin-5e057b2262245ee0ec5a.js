(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{468:function(e,t,r){"use strict";r.r(t);var s=r(23),i=r(19);!function(e){var t={widget:null,form:null,emailFormatValidation:null,excludedCharacters:null,selectors:{CONTAINER:".sage-sso-login",DROPDOWN_TOGGLE:".dropdown-toggle",FORM_CONTROL:".form-control",USERNAME_INPUT:'[name="login"]',PASSWORD_INPUT:'[name="password"]',SOCIETY_INPUT:'[name="ssoSociety"]',USEAJAX_INPUT:'[name="submitViaAJAX"]',SERVICE_NAME:'[name="serviceUrl"]',ERROR_EL:".useAJAX_SSO_error",FORM:"form",D_NONE:"d-none"},init:function init(){this.widget=document.querySelector(this.selectors.CONTAINER),this.widget&&(this.form=this.widget.querySelector(t.selectors.FORM),this.form&&(this.requiredFieldsValidation=new i.a(this.form),this.excludedCharacters=new s.default(this.form),this.control()))},control:function control(){var e=this;this.form.setAttribute("novalidate","true"),this.form.setAttribute("autocomplete","off"),this.form.addEventListener("submit",t.onSubmitHandler.bind(this));var r=this.getInputs();r.length>0&&r.forEach((function(r){return r.addEventListener("focus",t.onFocusHandler.bind(e))}),this)},onFocusHandler:function onFocusHandler(e){this.form.querySelector(t.selectors.ERROR_EL).classList.add(this.selectors.D_NONE)},onChangeHandler:function onChangeHandler(e){this.classList.remove("is-invalid"),this.removeAttribute("aria-invalid")},onSubmitHandler:function onSubmitHandler(e){var r=this.requiredFieldsValidation.checkRequired(),s=this.excludedCharacters.checkExcludedCharacters();if(r&&s){var i,o=e.target,n=o.querySelector(t.selectors.USEAJAX_INPUT).value;if(!0!==n&&"true"!==n)return!0;e.preventDefault();var a=o.querySelector(t.selectors.SERVICE_NAME).value,l=o.querySelector(t.selectors.USERNAME_INPUT).value,u=o.querySelector(t.selectors.PASSWORD_INPUT).value,c=o.querySelector(t.selectors.SOCIETY_INPUT).value,d=null===(i=o.querySelector("input[name='anti-forgery-token']"))||void 0===i?void 0:i.value,f={login:l,password:u,society:c};return d&&(f["anti-forgery-token"]=d),$.ajax({url:a,type:"POST",data:f,success:function handleSuccessRequest(e,r,s){if(!0===e.success||"true"===e.success)location.reload();else{var i=t.getInputs();i.forEach((function(e,t){0===t&&e.focus(),e.classList.add("is-invalid"),e.setAttribute("aria-invalid","true"),e.setAttribute("aria-describedby","useAJAX_SSO_error")})),i.forEach((function(e){return e.addEventListener("change",t.onChangeHandler)}),this),i[0].focus();var n=o.querySelector(t.selectors.ERROR_EL);n.classList.remove(t.selectors.D_NONE),n.setAttribute("aria-live","assertive"),n.setAttribute("id","useAJAX_SSO_error")}},error:function handleBadRequest(e,t,r){}}),!1}e.preventDefault(),this.focusFirstInvalid(),this.form.scrollIntoView()},focusFirstInvalid:function focusFirstInvalid(){var e=this.form.querySelector(".form-group.is-invalid"),t=e.querySelector(this.selectors.DROPDOWN_TOGGLE)||e.querySelector(this.selectors.FORM_CONTROL);e.querySelector(".message").setAttribute("aria-live","assertive"),null==t||t.focus()},getInputs:function getInputs(){return t.widget.querySelectorAll('input:not([type="hidden"]), .dropdown-toggle')}};e.ssoLogin=t}(UX)}}]);
//# sourceMappingURL=ssoLogin-5e057b2262245ee0ec5a.js.map