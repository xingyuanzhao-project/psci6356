
(function(tandf){var CrossMarkApi={Settings:{registered:false,version:'v2.0',endpoint:'https://crossmark.crossref.org/dialog'},Helpers:{init:function(){if(!CrossMarkApi.Settings.registered){CrossMarkApi.Settings.registered=true;setTimeout(function(){document.querySelectorAll('[data-target=crossmark]').forEach(CrossMarkApi.Helpers.registerEvents);})}},registerEvents:function(link){TandfUtils.addMultipleEventListeners(link,['click','keydown'],function(evt){if(evt.keyCode===13||evt.keyCode===undefined){evt.preventDefault();CrossMarkApi.Helpers.display(link.dataset.doi);}})},display:function(doi){var src=CrossMarkApi.Settings.endpoint+'?'+TandfUtils.encodeQueryData({doi:doi,domain:window.location.hostname,uri_scheme:window.location.protocol,cm_version:CrossMarkApi.Settings.version});new Modal({content:"<div data-modal-name='cross_mark'><iframe src='"+src+"' id='cross_mark--popup'></iframe></div>",name:"crossmark",maxWidth:768,minWidth:680,}).open();}}}
$(CrossMarkApi.Helpers.init);tandf.CrossMarkApi=CrossMarkApi;})(tandf);

