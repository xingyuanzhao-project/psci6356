(window.webpackJsonp=window.webpackJsonp||[]).push([[1,7],{109:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(3),o=n(4),c=n(401),l=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,[{key:"setCache",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!n){var r=t?c.a.issueTtl:c.a.defaultTtl;e.setHeader("Cache-Control","max-age=".concat(r))}500===n&&e.setHeader("Cache-Control","max-age=".concat(c.a.timeoutIssueTtl))}}]),e}(),f=new l},1126:function(e,t,n){var r=n(46),o=n(742)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},120:function(e,t,n){"use strict";n(57),n(52),n(29);var r,o=n(16),c=n(8),l=n(54),f={close:"Close","zoom-in":"Zoom in","zoom-out":"Zoom out",next:"Next image",prev:"Previous image",viewer:"full screen image"};function d(e){"Enter"!==e.code&&"Space"!==e.code||(e.preventDefault(),e.target.click())}function v(e){return null!==e.target?e.target.$viewer:void 0}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onlyZoomableImages:!0},t=!1;return{inline:!1,button:!0,navbar:!1,title:function(){return""},toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!1,scalable:!1,transition:!0,fullscreen:!1,keyboard:!0,viewed:function(e){var t,n,r,o,c,l=v(e),f=null==e?void 0:e.detail.originalImage,d=null==l?void 0:l.title;if(f&&d){var caption=(null===(n=null===(t=f.parentNode)||void 0===t?void 0:t.parentNode)||void 0===n?void 0:n.querySelector(".caption"))||(null===(c=null===(o=null===(r=f.parentNode)||void 0===r?void 0:r.parentNode)||void 0===o?void 0:o.parentNode)||void 0===c?void 0:c.querySelector(".caption"));caption&&(d.innerHTML="<span>"+caption.innerHTML+"</span>")}if(l.image){var m=l.image,h=m.getAttribute("alt")||"";(m.getAttribute("src")||"").includes(h)&&m.setAttribute("alt","")}var y=(document.querySelectorAll(".viewer-title")||[])[0],O=(document.querySelectorAll(".viewer-container")||[])[0],j=(document.querySelectorAll(".viewer-close")||[])[0];y&&y.querySelectorAll("a").forEach((function(link){link.removeAttribute("href"),link.style.pointerEvents="none",link.style.color="inherit",link.setAttribute("tabindex","-1"),link.setAttribute("aria-disabled","true")}));j&&(j.blur(),j.setAttribute("tabindex","0")),O&&(O.removeAttribute("aria-labelledby"),O.setAttribute("tabindex","-1"),O.focus())},hide:function(e){var t=v(e),n=null==t?void 0:t.title;n&&(n.innerHTML="")},url:function(image){return image.hasAttribute("data-original-image")?"".concat(l.a.assetsService,"/binary/version/id/").concat(image.getAttribute("data-original-image").replace("/binary/version/id/","")):image.hasAttribute("data-enlarged-image")?image.getAttribute("data-enlarged-image"):image.getAttribute("data-src")},filter:function(image){return(image.classList.contains("graphic")||image.classList.contains("mime")||"true"===image.getAttribute("data-zoomable"))&&(!e.onlyZoomableImages||"true"===image.getAttribute("data-zoomable"))},show:function(){document.activeElement&&(r=document.activeElement)},shown:function(e){var n,r=v(e);if(r){var l=null==r?void 0:r.viewer,m=null==r?void 0:r.toolbar,h=null==r?void 0:r.button;if(!t){var y=m.querySelector("ul"),O=m.querySelectorAll("ul > li");if(y.innerHTML="",O.forEach((function(e){var t=e.getAttribute("class");e.removeAttribute("class"),e.innerHTML="";var li=document.createElement("li");li.classList.add("viewer-control"),li.innerHTML=e.outerHTML.replace("li","div"),li.setAttribute("class",t||"");var n=li.querySelector("div");if(n){var r=n.getAttribute("data-viewer-action")||"",l=o.default.extend({props:{icon:{type:String,default:t},alt:{type:String,default:f[r]}}}),d=new c.f(l);d.$mount(),n.appendChild(d.$el)}y.appendChild(li)})),h){var j=o.default.extend({props:{icon:{type:String,default:"viewer-close"},alt:{type:String,default:f.close}}}),w=new c.f(j);w.$mount(),h.appendChild(w.$el)}t=!0}var T=m.querySelectorAll("li > div");if(l){var A=null===(n=r.images[r.index])||void 0===n?void 0:n.getAttribute("data-img-name"),k=(A?A+" ":"")+f.viewer;l.setAttribute("role","dialog"),l.setAttribute("aria-label",k),l.removeAttribute("aria-labelledby")}var R=m.querySelector(".viewer-zoom-in > div");S(".viewer-zoom-in > div",f["zoom-in"],m),S(".viewer-zoom-out > div",f["zoom-out"],m),S(".viewer-prev > div",f.prev,m),S(".viewer-next > div",f.next,m),S(h,f.close),h&&(h.addEventListener("keydown",d),h.addEventListener("keydown",(function(e){"Tab"===e.code&&R&&(e.preventDefault(),e.shiftKey?T[T.length-1].focus():R.focus())}))),T.forEach((function(e){e.setAttribute("tabindex","0"),e.addEventListener("keydown",d)})),R&&R.addEventListener("keydown",(function(e){"Tab"===e.code&&e.shiftKey&&h&&(h.focus(),e.preventDefault())}))}function S(e,label,t){var n=null;"string"==typeof e&&t?n=t.querySelector(e):e instanceof HTMLElement&&(n=e),n&&(n.setAttribute("tabindex","0"),n.setAttribute("role","button"),n.setAttribute("aria-label",label),n.removeEventListener("keydown",d),n.addEventListener("keydown",d))}},hidden:function(e){var t=v(e);if(t){var n=null==t?void 0:t.toolbar,o=null==t?void 0:t.button;if(n)n.querySelectorAll("li").forEach((function(e){return e.removeEventListener("keydown",d)}));o&&o.removeEventListener("keydown",d),r&&r.focus()}}}}},123:function(e,t,n){"use strict";n.d(t,"b",(function(){return o.a})),n.d(t,"a",(function(){return c.a}));var r=n(36),o=n(740),c=n(1082);r.a.bind(o.a).toSelf().inTransientScope()},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r,o=n(36),c=n(15),l=n(3),f=n(4),d=n(1),v=(n(37),n(12),n(17),n(1118)),m=n(9),h=n(91),y=n(141),O=n(54),j=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},w=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},T=function(){function e(t){Object(l.a)(this,e),this.httpService=t,this.authService=new h.a(O.a)}var t,n;return Object(f.a)(e,[{key:"addToBasket",value:function(e,t){return new Promise((function(n,r){AOP.basket.addToBasket(e,t).fail((function(e){r(e)})).done((function(){n()}))}))}},{key:"isProductInBasket",value:(n=Object(c.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(AOP.basket.isCartItemCountLoaded()){e.next=4;break}return e.next=3,this.sleep(300);case 3:return e.abrupt("return",this.isProductInBasket(t));case 4:return e.abrupt("return",AOP.basket.isProductInBasket(t));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getPrice",value:(t=Object(c.a)(regeneratorRuntime.mark((function e(t,n,r){var o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o="".concat(O.a.publicApi,"/ecommerce/price/").concat(encodeURIComponent(t),"?currency=").concat(n,"&countryCode=").concat(r),e.next=4,this.httpService.get(o,{headers:this.authService.getAuthHeaders()});case 4:return c=e.sent,e.abrupt("return",c||null);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e,n,r){return t.apply(this,arguments)})},{key:"getCurrency",value:function(){return m.CurrencyEnum[AOP.basket.currency]}},{key:"isEnabled",value:function(){return AOP.basket.isEnabled}},{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}]),e}();T=j([Object(v.a)(),w("design:paramtypes",["function"==typeof(r=void 0!==y.a&&y.a)?r:Object])],T),o.a.bind(T).toSelf().inTransientScope()},126:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(36),o=n(3),c=n(4),l=n(1),f=(n(12),n(1118)),d=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},v=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"displayError",value:function(e){AOP.createAlertBox(e)}},{key:"displayInformation",value:function(e){AOP.createAlertBox(e,{alertType:"info"})}}]),e}();v=d([Object(f.a)()],v),r.a.bind(v).toSelf().inTransientScope()},142:function(e,t,n){"use strict";n(743)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},152:function(e,t,n){"use strict";var r=n(1106);n.d(t,"a",(function(){return r.a}))},153:function(e,t,n){"use strict";var r=n(1071);n.d(t,"a",(function(){return r.a}))},154:function(e,t,n){"use strict";var r=n(1111);n.d(t,"a",(function(){return r.a}))},155:function(e,t,n){"use strict";var r=n(36),o=n(323),c=(n(135),n(1084));n.d(t,"a",(function(){return c.a})),r.a.bind(o.a).toSelf().inTransientScope()},321:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),o=n(3),c=Object(r.a)((function e(t,n){Object(o.a)(this,e),this.refId=t,this.openUrl=n}))},322:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),o=n(4),c=(n(38),n(52),n(1126),n(20)),l=function(){function e(t,n,o,l,image){Object(r.a)(this,e),this.resolver=t,this.queryParams=n,this.organisationName=o,this.customText=l,this.image=image,this.hasQueryParams=this.hasTruthyQueryParams(this.queryParams),this.displayName=this.getDisplayName(this.customText||""),this.resolver=c.a.buildURLQuery(this.resolver,c.a.filterEmptyObjectValues(this.queryParams))}return Object(o.a)(e,[{key:"getDisplayName",value:function(e){return this.image?"<img class='openurl-logo-image' alt='".concat(this.organisationName||"","' src='").concat(this.image,"' /> ").concat(e):e||"OpenURL query"}},{key:"hasTruthyQueryParams",value:function(e){var t=["genre","sid"],n=Object.keys(e).reduce((function(n,r){return t.includes(r)||(n[r]=e[r]),n}),{});return Object.values(n).some((function(e){return e}))}}]),e}()},323:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r,o=n(15),c=n(3),l=n(4),f=n(1),d=(n(37),n(12),n(1118)),v=n(400),m=n(141),h=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},y=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=function(){function e(t){Object(c.a)(this,e),this.httpService=t}var t;return Object(l.a)(e,[{key:"getHtml",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t,n,r){var o,c,html;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={doi:t,productId:n,productType:r},e.prev=2,e.next=5,this.httpService.post("/core/services/aop-cambridge-core/citations",o);case 5:return c=e.sent,html=c.html,e.abrupt("return",html||"");case 10:return e.prev=10,e.t0=e.catch(2),v.a.handle("CitedByService.getCitedByHtml",e.t0),e.abrupt("return","");case 14:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(e,n,r){return t.apply(this,arguments)})}]),e}();O=h([Object(d.a)(),y("design:paramtypes",["function"==typeof(r=void 0!==m.a&&m.a)?r:Object])],O)},401:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(4),o=n(3),c=(n(68),Object(r.a)((function e(){Object(o.a)(this,e)})));c.defaultTtl=Number(e.env.CACHE_DEFAULT_TTL)||172800,c.issueTtl=Number(e.env.CACHE_ISSUE_TTL)||3600,c.metricsTtl=Number(e.env.CACHE_METRICS_TTL)||86400,c.timeoutIssueTtl=Number(e.env.CACHE_TIMEOUT_TTL)||300}).call(this,n(71))},45:function(e,t,n){"use strict";var r=n(1097);n.d(t,"a",(function(){return r.a}));var o=n(1098);n.d(t,"b",(function(){return o.a}));var c=n(1099);n.d(t,"c",(function(){return c.a}));var l=n(1100);n.d(t,"d",(function(){return l.a}));var f=n(1101);n.d(t,"e",(function(){return f.a}));var d=n(1102);n.d(t,"f",(function(){return d.a}));var v=n(1103);n.d(t,"g",(function(){return v.a}));var m=n(1104);n.d(t,"h",(function(){return m.a}))},51:function(e,t,n){"use strict";var r=n(1068);n.d(t,"b",(function(){return r.a}));var o=n(1074);n.d(t,"a",(function(){return o.a}));var c=n(1075);n.d(t,"d",(function(){return c.a}));var l=n(1076);n.d(t,"e",(function(){return l.a}));var f=n(1077);n.d(t,"f",(function(){return f.a}));var d=n(1078);n.d(t,"c",(function(){return d.a}))},56:function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return T.a}));var r,o=n(36),c=n(15),l=n(3),f=n(4),d=n(1),v=(n(37),n(12),n(1118)),m=n(91),h=n(141),y=n(54),O=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},j=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},w=function(){function e(t){Object(l.a)(this,e),this.httpService=t,this.authService=new m.a(y.a)}var t;return Object(f.a)(e,[{key:"get",value:(t=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(y.a.publicApi,"/related-content/").concat(encodeURIComponent(t)),e.next=4,this.httpService.get(n,{headers:this.authService.getAuthHeaders()});case 4:return r=e.sent,e.abrupt("return",r.content||[]);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(e){return t.apply(this,arguments)})}]),e}();w=O([Object(v.a)(),j("design:paramtypes",["function"==typeof(r=void 0!==h.a&&h.a)?r:Object])],w);var T=n(1079);o.a.bind(w).toSelf().inTransientScope()},59:function(e,t,n){"use strict";var r=n(1112);n.d(t,"a",(function(){return r.a}));var o=n(1107);n.d(t,"b",(function(){return o.a}));var c=n(1108);n.d(t,"c",(function(){return c.a}));var l=n(1109);n.d(t,"d",(function(){return l.a}));var f=n(1110);n.d(t,"e",(function(){return f.a}))},67:function(e,t,n){"use strict";function r(e){return this.$store.state.unleash.repo,this.$unleash.isEnabled(e)}n.d(t,"a",(function(){return r}))},740:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(3),o=n(4),c=n(1),l=(n(12),n(29),n(142),n(1118)),f=n(54),d=n(20),v=function(e,t,n,desc){var r,o=arguments.length,l=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(c.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(o<3?r(l):o>3?r(t,n,l):r(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l},m=[{name:"Home",url:f.a.baseUrl}],h=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,[{key:"getForArticlePage",value:function(e,t){var n={name:"Journals",url:"".concat(f.a.baseUrl,"/publications/journals")},r=t.isCompanion?[{name:t.parentCompanionJournalName,url:t.parentCompanionUrl}]:[],o={name:t.latestTitle,url:t.url},c=t.isFirstView?[{name:"FirstView",url:"".concat(o.url,"/firstview")}]:[],l=e.acceptedManuscript?[{name:"Accepted manuscript",url:"".concat(o.url,"/accepted-manuscripts")}]:[],v=t.hasPastTitle?[{name:t.title,url:"".concat(o.url,"/past-title/").concat(d.a.slug(t.title.replace("/","-")),"/information/").concat(t.id)}]:[],h=t.isFirstView?[]:this.prepareVolumeAndIssueCrumb(t),y={name:d.a.truncateHtml(e.htmlTitle,50)};return m.concat(n,r,o,v,l,c,h,y)}},{key:"getForElement",value:function(e,title){var t={name:"Cambridge Elements",url:"".concat(f.a.baseUrl,"/publications/elements")},n={name:e.title,url:e.link},r={name:d.a.truncateHtml(title,50)};return m.concat(t,n,r)}},{key:"getForChapter",value:function(e,t){var n={name:"Books",url:"".concat(f.a.baseUrl,"/publications/books")},r={name:e.title,url:e.url},o={name:t};return m.concat(n,r,o)}},{key:"prepareVolumeAndIssueCrumb",value:function(e){var t="",n="";return e.issue&&e.volume?(t="".concat(e.volume.title," ").concat(e.issue.title),n=e.issue.url):e.issue?(t=e.issue.title,n=e.issue.url):e.volume&&(t=e.volume.title,n=e.volume.url),t&&n?[{name:t.length>50?d.a.trimString(t,50,!0):t,url:n}]:[]}}]),e}();h=v([Object(l.a)()],h)},77:function(e,t,n){"use strict";var r=n(1080);n.d(t,"b",(function(){return r.a}));var o=n(1081);n.d(t,"a",(function(){return o.a}))},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(3),o=n(4),c=new(function(){function e(){Object(r.a)(this,e),this._startTime=(new Date).getTime(),this._endTime=(new Date).getTime(),this._loadingTime=(this._endTime-this._startTime)/1e3}return Object(o.a)(e,[{key:"loadingTime",get:function(){return this._loadingTime}},{key:"start",value:function(){this._startTime=(new Date).getTime()}},{key:"stop",value:function(){this._endTime=(new Date).getTime()}}]),e}())}}]);